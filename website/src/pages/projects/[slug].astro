---
import { HomeLink } from "@/consts";

import { type CollectionEntry, getCollection } from "astro:content";
import Meta from "@/components/Meta.astro";
import Demo from "@/components/Demo.astro";

export async function getStaticPaths() {
	const projects = await getCollection("projects");
	return projects.map((a) => ({
		params: { slug: a.slug },
		props: a,
	}));
}
type Props = CollectionEntry<"projects">;

const project = Astro.props;
---

<html lang="en" data-bs-theme="dark">
	<head>
		<Meta />
	</head>
	<body>
		<div class="game-title">
			{project.data.title}
			<span class="game-menu-item">
				<a class="game-menu-link" href={HomeLink()}>home</a>
			</span>
			<span class="game-menu-item">
				<a class="game-menu-link" href={project.data.src}>src</a>
			</span>
		</div>
		<Demo
			dir="projects"
			name={project.slug}
			dimensions={project.data.dimensions}
		/>
	</body>
</html>
<style>
	body {
		background: black;
		display: flex;
		justify-content: center;
		align-items: center;
		height: 100vh;
		margin: 0;
	}

	.game-title {
		pointer-events: none;
		position: absolute;
		bottom: 10px;
		left: 10px;
		margin-top: 0px;
		padding-left: 10px;
		color: white;
		text-decoration: none;
		z-index: 1;
		text-align: left;
		font-family: "Arial Black", Gadget, sans-serif;
		font-size: 30px;
	}

	.game-menu-item {
		pointer-events: auto;
		font-size: 18px;
		padding-left: 10px;
		font-family: Arial, Helvetica, sans-serif;
	}

	.game-menu-link {
		text-decoration: none;
		color: white;
	}

	a:-webkit-any-link {
		color: -webkit-link;
		cursor: pointer;
		text-decoration: underline;
	}
</style>
